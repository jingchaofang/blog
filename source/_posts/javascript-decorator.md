---
title: JavaScript Decorator
date: 2019-12-19 13:41:14
tags:
---


从设计模式到ES中装饰器语法的应用再到通过babel观察转换@语法，了解es装饰器语法的具体实现细节。

修饰器（Decorator）是一个函数，用来修改类的行为。

修饰器对类的行为的改变，是代码编译时发生的，而不是在运行时。
这意味着，修饰器能在编译阶段运行代码。

## proposal 提案

stage2 第二阶段

https://github.com/tc39/proposal-decorators

## related

http://www.tslang.cn/docs/handbook/decorators.html

https://github.com/jayphelps/core-decorators

https://es6.ruanyifeng.com/#docs/decorator

https://blog.csdn.net/weixin_33729196/article/details/88032364

## javascript设计模式之装饰者模式

### 装饰者模式定义及特点

定义：在不改变原对象的基础上，在程序运行期间动态地给对象添加一些额外职责。试原有对象可以满足用户更复杂的需求。

特点：
- 在不改变原对象的原本结构的情况下进行功能添加
- 装饰对象和原对象具有相同的接口，可以使用户以与原对象相同的方式使用装饰对象
- 装饰对象是原对象经过包装后的对象

### 要解决的问题

要正确的理解设计模式，首先要明白它是因为什么问题被提出来的。
在传统的面向对象语言中，我们给对象添加职责通常是通过继承来实现，而继承有很多缺点：
- 父类和子类强耦合，父类改变会导致子类改变
- 父类内部细节对子类可见，破坏了封装性
- 在实现功能复用的同时，可能会创造过多子类

我们可以发现通过装饰者模式可以实现动态灵活地向对象添加职责而没有显式地修改原有代码，大大减少了需要创建的类数量，它弥补了继承的不足，解决了不同类之间共享方法的问题

它的具体使用场景如下：

- 需要扩展一个对象的功能，或者给一个对象增加附加责任
- 需要动态的给一个对象增加功能，并动态地撤销这些功能
- 需要将一些基本的功能通过排列组合成一个巨大的功能，使得通过继承变得不现实




